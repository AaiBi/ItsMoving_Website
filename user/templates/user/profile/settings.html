{% extends 'base_app/base.html' %}

{% block title %} Paramètres {% endblock %}

{% load static %}

{% block css_styles %}

{% endblock %}

{% block main %}

    <!-- **************** MAIN CONTENT START **************** -->
    <!-- =======================

	Page Banner START -->
    <section class="pt-0">
        <!-- Main banner background image -->
        <div class="container-fluid px-0">
            <div class="bg-blue h-100px h-md-200px rounded-0" style="background:url({% static 'base_app/assets/images/pattern/04.png' %}) no-repeat center center; background-size:cover;">
            </div>
        </div>
        <div class="container mt-n4">
            <div class="row">
                <!-- Profile banner START -->
                <div class="col-12">
                    <div class="card bg-transparent card-body p-0">
                        <div class="row d-flex justify-content-between">
							{% if not mover %}
								{%if user.is_authenticated %}
									<!-- Avatar -->
									<div class="col-auto mt-4 mt-md-0">
										<div class="avatar avatar-xxl mt-n3">
											<img class="avatar-img rounded-circle border border-white border-3 shadow" src="{% static 'base_app/assets/images/avatar/01.png' %}" alt="">
										</div>
									</div>
									<!-- Profile info -->
									<div class="col d-md-flex justify-content-between align-items-center mt-4">
                                <div>
                                    <h1 class="my-1 fs-4">
										{{user.username|capfirst}} <i class="bi bi-patch-check-fill text-info small"></i>
									</h1>
                                </div>
                            </div>
								{% endif %}
							{% endif %}
                        </div>
                    </div>
                    <!-- Profile banner END -->

                    <!-- Advanced filter responsive toggler START -->
                    <!-- Divider -->
                    <hr class="d-xl-none">
                    <div class="col-12 col-xl-3 d-flex justify-content-between align-items-center">
                        <a class="h6 mb-0 fw-bold d-xl-none" href="#">Menu</a>
                        <button class="btn btn-primary d-xl-none" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
                            <i class="fas fa-sliders-h"></i>
                        </button>
                    </div>
                    <!-- Advanced filter responsive toggler END -->
                </div>
            </div>
        </div>
    </section>
    <!-- =======================
    Page Banner END -->

	{% if error %}
		<div class="alert alert-danger alert-dismissible fade show" id="alert1" role="alert">
			{{ error }}
		</div>
	{% else %}
		{% if messages %}
			{% for message in messages %}
				<div class="alert {{message.tags}} alert-dismissible fade show" id="alert2" role="alert">
					{{message}}
				</div>
			{% endfor %}
		{% endif %}
	{% endif %}

    <!-- =======================
	Page content START -->
	<section class="pt-2">
		<div class="container">
			<div class="row">
				<!-- Right sidebar START -->
				<div class="col-xl-3">
					<!-- Responsive offcanvas body START -->
					<nav class="navbar navbar-light navbar-expand-xl mx-0">
						<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
							<!-- Offcanvas header -->
							<div class="offcanvas-header bg-light">
								<h5 class="offcanvas-title" id="offcanvasNavbarLabel">Mon profil</h5>
								<button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
							</div>
							<!-- Offcanvas body -->
							<div class="offcanvas-body p-3 p-xl-0">
								<div class="bg-dark border rounded-3 pb-0 p-3 w-100">
									<!-- Dashboard menu -->
									<div class="list-group list-group-dark list-group-borderless">
										{% if mover %}
											<a class="list-group-item" href="{% url 'profile' %}"><i class="bi bi-ui-checks-grid fa-fw me-2"></i>
												Tableau de bord
											</a>
										{% endif %}
										<a class="list-group-item" href="{% url 'preview' %}"><i class="bi bi-person-lines-fill fa-fw me-2"></i>
											Aperçu du profil
										</a>
										{% if mover %}
											<a class="list-group-item" href="{% url 'statistic' %}"><i class="bi bi-graph-up fa-fw me-2"></i>
												Évolution de vos activités
											</a>
											<a class="list-group-item" href="{% url 'reviews' %}"><i class="bi bi-star fa-fw me-2"></i>
												Avis des clients
											</a>
											<a class="list-group-item" href="{% url 'billing' %}"><i class="bi bi-wallet2 fa-fw me-2"></i>
												Facturation
											</a>
										{% endif %}
										<a class="list-group-item" href="{% url 'quote_request' %}"><i class="bi bi-folder-check fa-fw me-2"></i>
											Demandes de devis
										</a>
										<a class="list-group-item" href="{% url 'edit_profile' %}"><i class="bi bi-pencil-square fa-fw me-2"></i>
											Configuration du profil
										</a>
										<a class="list-group-item active" href="{% url 'settings' %}"><i class="bi bi-gear fa-fw me-2"></i>
											Paramètres
										</a>
										<a class="list-group-item" href="{% url 'user_password_change' %}"><i class="bi bi-lock fa-fw me-2"></i>
											Mot de passe
										</a>
										<form action="{% url 'logout_user' %}" method="POST">
                            				{% csrf_token %}
											<button type="submit" class="list-group-item text-danger bg-danger-soft-hover">
												<i class="fas fa-sign-out-alt fa-fw me-2"></i>Déconnexion
											</button>
                        				</form>
									</div>
								</div>
							</div>
						</div>
					</nav>
					<!-- Responsive offcanvas body END -->
				</div>
				<!-- Right sidebar END -->

				<!-- Main content START -->
				<div class="col-xl-9">

					<!-- Edit profile START -->
					<div class="card border rounded-3">
						<!-- Card header -->
						<div class="card-header border-bottom">
							<h3 class="card-header-title mb-0">Paramètres</h3>
						</div>
						<!-- Card header END -->

						<!-- Card body START -->
						<div class="card-body">

							<!-- Tabs START -->
							<ul class="nav nav-pills nav-pills-bg-soft justify-content-sm-center mb-4 px-3" id="pills-tab" role="tablist">
								<!-- Tab item -->
								<li class="nav-item me-2 me-sm-5">
									<button class="nav-link mb-2 mb-md-0 active" id="pills-tab-1" data-bs-toggle="pill" data-bs-target="#pills-tabs-1" type="button" role="tab" aria-controls="pills-tabs-1" aria-selected="false">
										Zones d'intervention
									</button>
								</li>
								<!-- Tab item -->
								<li class="nav-item me-2 me-sm-5">
									<button class="nav-link mb-2 mb-md-0" id="pills-tab-2" data-bs-toggle="pill" data-bs-target="#pills-tabs-2" type="button" role="tab" aria-controls="pills-tabs-2"	aria-selected="false">
										Types de déménagement
									</button>
								</li>
								<!-- Tab item -->
								<li class="nav-item me-2 me-sm-5">
									<button class="nav-link mb-2 mb-md-0" id="pills-tab-3" data-bs-toggle="pill" data-bs-target="#pills-tabs-3" type="button" role="tab" aria-controls="pills-tabs-3" aria-selected="false">
										Types de clientèle
									</button>
								</li>
							</ul>
							<!-- Tabs END -->

							<!-- Tabs content START -->
							<div class="tab-content" id="pills-tabContent">
								<!-- Content START -->
								<div class="tab-pane fade show active" id="pills-tabs-1" role="tabpanel" aria-labelledby="pills-tab-1">
									<!-- START -->
									<div class="card border position-relative mb-4 d-sm-flex bg-success bg-opacity-10 border border-success p-3 rounded">
										<!-- Card header -->
										<div class="card-header bg-success bg-opacity-10 border-bottom">
											<h4 class="card-header-title mb-0">Pays d'intervention</h4>
										</div>
										<!-- Card body START -->
										<div class="card-body">
											{% for country in countries %}
												{% for mover_country in mover_countries %}
													{% if mover_country.country_id == country.id %}
														<a type="button" class="btn btn-success badge bg-success bg-opacity-10" href="{% url 'delete_mover_country' mover_country.id mover.id %}">
															<h5 class="text-success">{{country.name}}</h5>
														</a>
													{% endif %}
												{% endfor %}
											{% endfor %}

											{% if mover_countries_number != 3 %}
												<hr>
												<!-- Form START -->
												<form class="row g-3 mt-2 position-relative z-index-9" method="POST">
													{% csrf_token %}
													<!-- Company Name -->
													<div class="col-lg-12">
														<div class="form-check">
															{% for data in countries %}
																<input class="form-check-input" type="checkbox" value="{{data.name}}" name="country_name[]"/>
																<label class="form-check-label">
																	<h5>{{data.name}}</h5>
																</label></br>
															{% endfor %}
														</div>
													</div>
													</br>

													<!-- Button -->
													<div class="col-12" align="center">
														<button type="submit" name="add_country" value="add_country" class="btn btn-primary mb-0">Ajouter un autre pays</button>
													</div>
												</form>
												<!-- Form END -->
											{% endif %}
										</div>
										<!-- Card body END -->
									</div>
									<!-- END -->

									<!-- START -->
									<div class="card border position-relative mb-4 d-sm-flex bg-primary bg-opacity-10 border border-primary p-3 rounded">
										<!-- Card header -->
										<div class="card-header bg-primary bg-opacity-10 border-bottom">
											<h4 class="card-header-title mb-0">Regions d'intervention</h4>
										</div>
										<!-- Card body START -->
										<div class="card-body">
											{% for country in countries %}
												{% for mover_country in mover_countries %}
													{% if mover_country.country_id == country.id %}
														<h5>{{country.name}}</h5>

														{% for mover_region in mover_regions %}
															{% for region in regions %}
																{% if mover_region.region_id == region.id %}

																	{% if mover_region.country_id == country.id %}
																		<a type="button" class="btn btn-primary badge bg-primary bg-opacity-10" href="{% url 'delete_mover_region' mover_region.id mover.id %}">
																			<h5 class="text-primary">{{region.name}}</h5>
																		</a>
																	{% endif %}

																{% endif %}
															{% endfor %}
														{% endfor %}

													{% endif %}
												{% endfor %}
											{% endfor %}

											<hr>
											<!-- Form START -->
											<form class="row g-3 mt-2 position-relative z-index-9" method="POST">
												{% csrf_token %}
												<!-- region -->
												<div class="col-sm-12 mb-3">
													<label class="form-label">Regions<sup class="text-danger ms-1">*</sup></label>
													<select class="form-select form-control" name="region_name" required="">
														<option selected disabled value="">-------------------------</option>
														{% for country in countries %}
															{% for region in regions %}
																{% if region.country_id == country.id %}
																	<option value="{{region.name}}" class="text-dark">{{region.name}} - {{country.name|upper}}</option>
																{% endif %}
															{% endfor %}
														{% endfor %}
													</select>
												</div>
												</br>

												<!-- Button -->
												<div class="col-12" align="center">
													<button type="submit" name="add_region" value="add_region" class="btn btn-primary mb-0">Ajouter une region</button>
												</div>
											</form>
											<!-- Form END -->
										</div>
										<!-- Card body END -->
									</div>
									<!-- END -->
								</div>
								<!-- Content END -->

								<!-- Content START -->
								<div class="tab-pane fade" id="pills-tabs-2" role="tabpanel" aria-labelledby="pills-tab-2">
									<!-- START -->
									<div class="card border position-relative mb-4 d-sm-flex bg-warning bg-opacity-10 border border-warning p-3 rounded">
										<!-- Card body START -->
										<div class="card-body">
											{% for data2 in mover_moving_types1 %}
												<a type="button" class="btn btn-warning badge bg-warning bg-opacity-10" href="{% url 'delete_mover_moving_type1' data2.id mover.id %}">
													<h5 class="text-warning">{{data2.moving_type1_name}}</h5>
												</a>
											{% endfor %}

											{% if mover_moving_types1_number != 2 %}
												<hr>
												<!-- Form START -->
												<form class="row g-3 mt-2 position-relative z-index-9" method="POST">
													{% csrf_token %}
													<!-- Company Name -->
													<div class="col-lg-12">
														<div class="form-check">
															{% for data in moving_type1 %}
																<input class="form-check-input" type="checkbox" value="{{data.name}}" name="moving_type1_name[]"/>
																<label class="form-check-label">
																	<h4>{{data.name}}</h4>
																</label></br>
															{% endfor %}
														</div>
													</div>

													</br>

													<!-- Button -->
													<div class="col-12" align="center">
														<button type="submit" name="add_moving_type1" value="add_moving_type1" class="btn btn-primary mb-0">Ajouter</button>
													</div>
												{% endif %}
											</form>
											<!-- Form END -->
										</div>
										<!-- Card body END -->
									</div>
									<!-- END -->
								</div>
								<!-- Content END -->

								<!-- Content START -->
								<div class="tab-pane fade" id="pills-tabs-3" role="tabpanel" aria-labelledby="pills-tab-3">
									<!-- START -->
									<div class="card border position-relative mb-4 d-sm-flex bg-secondary bg-opacity-10 border border-secondary p-3 rounded">
										<!-- Card body START -->
										<div class="card-body">
											{% for data2 in mover_moving_types2 %}
												<a type="button" class="btn btn-secondary badge bg-secondary bg-opacity-10" href="{% url 'delete_mover_moving_type2' data2.id mover.id %}">
													<h5 class="text-secondary">{{data2.moving_type2_name}}</h5>
												</a>
											{% endfor %}

											{% if mover_moving_types2_number != 2 %}
												<hr>
												<!-- Form START -->
												<form class="row g-3 mt-2 position-relative z-index-9" method="POST">
													{% csrf_token %}
													<!-- Company Name -->
													<div class="col-lg-12">
														<div class="form-check">
															{% for data in moving_type2 %}
																<input class="form-check-input" type="checkbox" value="{{data.name}}" name="moving_type2_name[]"/>
																<label class="form-check-label">
																	<h4>{{data.name}}</h4>
																</label></br>
															{% endfor %}
														</div>
													</div>

													</br>

													<!-- Button -->
													<div class="col-12" align="center">
														<button type="submit" name="add_moving_type2" value="add_moving_type2" class="btn btn-primary mb-0">Ajouter</button>
													</div>
												{% endif %}
											</form>
											<!-- Form END -->
										</div>
										<!-- Card body END -->
									</div>
									<!-- END -->
								</div>
								<!-- Content END -->
							</div>
							<!-- Tabs content END -->

							</br></br></br></br></br>
							<!-- Profile START -->
							<h5 class="mb-4">Profile Settings</h5>
							<div class="form-check form-switch form-check-md">
								<input class="form-check-input" type="checkbox" role="switch" id="profilePublic" checked>
								<label class="form-check-label" for="profilePublic">Your profile's public visibility</label>
							  </div>
							<!-- Profile START -->

							<hr><!-- Divider -->

							<!-- Notification START -->
							<h5 class="card-header-title">Notifications Settings</h5>
							<p class="mb-2 mt-3">Choose type of notifications you want to receive</p>
							<div class="form-check form-switch form-check-md mb-3">
								<input class="form-check-input" type="checkbox" id="checkPrivacy1" checked="">
								<label class="form-check-label" for="checkPrivacy1">Notify me via email when logging in</label>
							</div>
							<div class="form-check form-switch form-check-md mb-3">
								<input class="form-check-input" type="checkbox" id="checkPrivacy2">
								<label class="form-check-label" for="checkPrivacy2">Send SMS confirmation for all online payments</label>
							</div>
							<div class="form-check form-switch form-check-md mb-3">
								<input class="form-check-input" type="checkbox" id="checkPrivacy3" checked="">
								<label class="form-check-label" for="checkPrivacy3">Check which device(s) access your account</label>
							</div>
							<div class="form-check form-switch form-check-md mb-3">
								<input class="form-check-input" type="checkbox" id="checkPrivacy4">
								<label class="form-check-label" for="checkPrivacy4">Show your profile publicly</label>
							</div>
							<!-- Notification START -->

							<!-- Buttons -->
							<div class="d-sm-flex justify-content-end">
								<button type="button" class="btn btn-sm btn-primary me-2 mb-0">Save changes</button>
								<a href="#" class="btn btn-sm btn-outline-secondary mb-0">Cancel</a>
							</div>

						</div>
						<!-- Card body END -->
					</div>
					<!-- Edit profile END -->

					{% if mover %}
						<!-- =======================
						Mover account START -->



						<!-- =======================
						End Mover account -->
					{% else %}
						<!-- =======================
						Simple User account START -->

						{%if user.is_authenticated %}


						{% endif %}
						<!-- =======================
						End Simple User account -->
					{% endif %}

				</div>
				<!-- Main content END -->
			</div><!-- Row END -->
		</div>
	</section>
	<!-- =======================
	Page content END --></br></br></br></br></br></br></br></br></br></br></br>

    <!-- **************** MAIN CONTENT END **************** -->


{% endblock %}